<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriTech Magic Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script type="module">
        import { GoogleGenerativeAI } from "https://cdn.jsdelivr.net/npm/@google/generative-ai/+esm";
        window.GoogleGenerativeAI = GoogleGenerativeAI;
    </script>
    <style>
        :root {
            --primary: #4CAF50;
            --primary-dark: #388E3C;
            --secondary: #FFC107;
            --background: #f5f5f5;
            --card: #ffffff;
            --text: #333333;
            --text-light: #666666;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background-color: var(--background);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            animation: pulse 8s infinite linear;
        }
        
        @keyframes pulse {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background-color: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite, shine 3s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes shine {
            0% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 193, 7, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0); }
        }
        
        .tagline {
            font-weight: 300;
            opacity: 0.9;
        }
        
        main {
            flex: 1;
            display: flex;
            padding: 2rem;
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }
        
        .sidebar {
            width: 300px;
            background-color: var(--card);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            height: fit-content;
            transform: translateX(-20px);
            opacity: 0;
            animation: slideIn 0.5s forwards 0.2s;
        }
        
        @keyframes slideIn {
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .sidebar-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .feature-card {
            background-color: var(--background);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--secondary);
            animation: cardGlow 2s infinite;
        }
        
        @keyframes cardGlow {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.3); }
            70% { box-shadow: 0 0 0 10px rgba(76, 175, 80, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }
        
        .feature-card h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .feature-card p {
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        .chat-container {
            flex: 1;
            background-color: var(--card);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform: translateY(20px);
            opacity: 0;
            animation: fadeInUp 0.5s forwards 0.4s;
        }
        
        @keyframes fadeInUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .chat-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chat-header h2 {
            font-size: 1.2rem;
            font-weight: 500;
        }
        
        .chatbot-avatar {
            width: 36px;
            height: 36px;
            background-color: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite, shine 3s infinite;
        }
        
        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .message {
            max-width: 80%;
            padding: 0.8rem 1.2rem;
            border-radius: 12px;
            line-height: 1.5;
            position: relative;
            animation: messageIn 0.3s ease-out;
            white-space: pre-wrap; /* To render newlines from the bot */
        }
        
        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .bot-message {
            align-self: flex-start;
            background-color: #e8f5e9;
            border-top-left-radius: 4px;
            color: var(--text);
        }
        
        .user-message {
            align-self: flex-end;
            background-color: var(--primary);
            color: white;
            border-top-right-radius: 4px;
            animation: messageIn 0.3s ease-out, userMessageGlow 1.5s;
        }
        
        @keyframes userMessageGlow {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            100% { box-shadow: 0 0 0 10px rgba(76, 175, 80, 0); }
        }
        
        .chat-input-container {
            padding: 1rem;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .chat-input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 24px;
            outline: none;
            transition: all 0.3s;
            font-size: 0.95rem;
        }
        
        .chat-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
            animation: inputPulse 2s infinite;
        }
        
        @keyframes inputPulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.2); }
            70% { box-shadow: 0 0 0 8px rgba(76, 175, 80, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }
        
        .send-button, .voice-button {
            background-color: var(--primary);
            color: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .send-button { animation: buttonShine 4s infinite; }
        
        .send-button:hover, .voice-button:hover {
            background-color: var(--primary-dark);
            transform: scale(1.05);
        }
        .send-button:active, .voice-button:active {
            transform: scale(0.95);
        }
        .send-button:disabled, .voice-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: scale(1);
            animation: none;
        }
        
        @keyframes buttonShine {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
            50% { box-shadow: 0 0 0 15px rgba(76, 175, 80, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }
        
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 0.8rem 1.2rem;
            background-color: #e8f5e9;
            border-radius: 12px;
            align-self: flex-start;
            margin-bottom: 1rem;
            width: fit-content;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--text-light);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }
        
        .floating-plants {
            position: absolute;
            width: 100px;
            height: 100px;
            opacity: 0.1;
            z-index: -1;
            animation: float 15s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        /* Voice Assistant Styles */
        .voice-button {
            background-color: white;
            color: var(--primary);
            border: 1px solid #e0e0e0;
        }
        
        .voice-button.listening {
            animation: pulse 1.5s infinite, voiceGlow 2s infinite;
            background-color: #ffeb3b;
        }
        
        @keyframes voiceGlow {
            0% { box-shadow: 0 0 0 0 rgba(255, 235, 59, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 235, 59, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 235, 59, 0); }
        }
        
        .voice-button svg {
            width: 20px;
            height: 20px;
        }
        
        .voice-status {
            font-size: 0.8rem;
            color: var(--text-light);
            text-align: center;
            margin-top: 5px;
            height: 20px;
        }
        
        @media (max-width: 768px) {
            main { flex-direction: column; padding: 1rem; }
            .sidebar { width: 100%; margin-bottom: 1rem; }
            .message { max-width: 90%; }
            .chat-input-container { padding: 0.8rem; }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">üå±</div>
            <span>AgriTech Magic</span>
        </div>
        <p class="tagline">Your intelligent farming assistant</p>
    </header>
    
    <main>
        <div class="sidebar">
            <h2 class="sidebar-title">‚ú® Agri Features</h2>
            <div class="feature-card" onclick="showSampleQuestion('Meri tomato crop ke leaves curl ho rahe hain?')">
                <h3>Crop Problems</h3>
                <p>Pests, diseases, yellow leaves, low yield solutions</p>
            </div>
            <div class="feature-card" onclick="showSampleQuestion('Mitti ki quality kaise improve karein?')">
                <h3>Soil & Fertilizer</h3>
                <p>Soil testing, organic farming, fertilizer advice</p>
            </div>
            <div class="feature-card" onclick="showSampleQuestion('Monsoon ke liye best crops kaun se hain?')">
                <h3>Weather & Sowing</h3>
                <p>Seasonal crops, ideal sowing times</p>
            </div>
            <div class="feature-card" onclick="showSampleQuestion('PM Kisan yojna ke bare mein bataiye')">
                <h3>Govt Schemes</h3>
                <p>Subsidies, loans, how to apply</p>
            </div>
            
            <div class="voice-status" id="voice-status"></div>
        </div>
        
        <div class="chat-container">
            <div class="chat-header">
                <div class="chatbot-avatar">üåæ</div>
                <h2>Kisaan Saathi</h2>
            </div>
            
            <div class="chat-messages" id="chat-messages">
                <div class="message bot-message">
                    Namaste Kisaan Bhai! üôè Main aapka digital kheti saathi hoon. Aap mujhse farming se related koi bhi sawaal puchh sakte hain - jaise crop problems, soil health, weather advice, ya sarkari yojnaon ke baare mein. Aapke kya sawaal hain?
                </div>
            </div>
            
            <div class="chat-input-container">
                <button class="voice-button" id="voice-button" title="Voice Input">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2a3 3 0 0 0-3 3v6a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"></path>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2h-1v2a8 8 0 0 0 7 7.93V21h2v-1.07A8 8 0 0 0 20 12v-2z"></path>
                    </svg>
                </button>
                <input type="text" class="chat-input" id="user-input" placeholder="Apna sawaal yahan likhein..." onkeypress="handleKeyPress(event)">
                <button class="send-button" id="send-button" onclick="sendMessage()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
        
        <img src="https://cdn-icons-png.flaticon.com/512/3079/3079165.png" class="floating-plants plant-1" alt="Plant">
        <img src="https://cdn-icons-png.flaticon.com/512/2039/2039008.png" class="floating-plants plant-2" alt="Plant">
    </main>
    
    <script type="module">
        // --- API & MODEL CONFIGURATION ---

        // 1. Google Gemini API Key
        // Get your key from Google AI Studio: https://aistudio.google.com/app/apikey
        const GOOGLE_API_KEY = "AIzaSyCBgAGciBw-6K12Zs2Rn4PN15gAkgBkj50";

        // 2. ElevenLabs API Configuration
        // üö® WARNING: This key is visible to anyone viewing your webpage source.
        // For production, it's safer to call ElevenLabs from a backend server.
        // REVOKE the old key and replace this with your new, secret ElevenLabs API Key.
        const ELEVENLABS_API_KEY = "sk_9b4086609475349c3356b7dcb9d75dcc5f4cec44e9a02bd0"; 
        
        // Find Voice IDs in your ElevenLabs "Voice Lab".
        const ELEVENLABS_VOICE_ID = "nZ3rcurug8egAyqjpDdR"; // Example Voice ID for "Rachel"

        // --- UI ELEMENT REFERENCES ---
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const voiceButton = document.getElementById('voice-button');
        const chatMessages = document.getElementById('chat-messages');

        // --- INITIALIZE GOOGLE GEMINI ---
        const genAI = new window.GoogleGenerativeAI(GOOGLE_API_KEY);
        const systemInstruction = `Rule 1. give answer in Hinglish with English text Don't use Hindi Text.
        
        you are smart and helpful chatbot ho jiska main purpose hai farmers ko unke farming-related issues mein madad dena. Tumhara design special tarike se isliye kiya gaya hai taaki tum sirf agriculture aur kheti se judi queries ka polite, useful aur practical tareeke se solution de sako. Tumhe har kisaan ke sawal ka jawab simple aur clearly explain karna hai ‚Äì chahe baat ho crop selection, seasonal planning, soil health, pest control, irrigation methods, ya organic farming techniques ki. Jab bhi koi user farming se judi dikkat bataye, tum uski baat ko dhyan se suno, aur use practical aur samajhne layak solution do.

        Agar koi user tumse sarkari yojna, subsidy, ya local mandi ke rates ke baare mein poochhe, toh tum usse helpful information do ya uska rasta dikhao. Tumhara bolne ka tareeka hamesha vinamr (polite), friendly, aur encouraging hona chahiye. Dhyan rahe ki kai users rural background se ho sakte hain, isliye technical jargon avoid karo, aur simple Hinglish mein baat karo. Kisi ki problem chhoti lage toh bhi uski izzat karo aur use lightly mat lo.

        Lekin agar koi user farming ke alawa kisi alag topic par sawal kare ‚Äì jaise film, politics, sports, ya technology ‚Äì toh tumhe thoda rude ya strict hokar batana hai ki tum sirf farming ke expert ho aur aise sawalon ka jawab tum nahi dete. Tum legal, political ya medical advice nahi doge. Tumhara final mission hai kisano ko unki rozi-roti se judi har dikkat ka solution dena aur unka digital farming saathi banna.
        
        1. Core Responsibilities (Aapka Kaam)
Crop Problems (Fasal ki samasya) ‚Äì Provide solutions for pests, diseases, yellow leaves, low yield, etc.

Soil & Fertilizer (Mitti aur khaad) ‚Äì Advise on soil testing, organic farming, and fertilizer use.

Weather & Sowing (Mausam aur bijai) ‚Äì Suggest monsoon/drought-resistant crops and ideal sowing times.

Govt Schemes (Sarkari yojana) ‚Äì Explain PM Kisan, subsidies, loans, and how to apply.

2. Response Style (Kaise Baat Karein)
Use simple Hinglish: "Aapke wheat crop ke leaves pe yellow spots dikh rahe hain? Yeh rust disease ho sakta hai."

Give step-by-step solutions: *"1. Infected leaves tod den. 2. Neem oil spray karein (10ml/liter)."*

Encourage follow-up questions: "Kya aapko aur koi doubt hai?"

3. Off-Topic Questions (Non-Farming Queries)
Respond firmly but politely:

"Main sirf farming advice deta hoon. Kripya crop, soil, ya mandi rates ke baare mein poochhein."

"Ye question mere expertise se bahar hai. Kisaan bhai, kya aapko kheti se related koi problem hai?"

4. Emergency Cases (Jaldi help chahiye?)
Direct to experts: "Ye serious lag raha hai! Turant apne Krishi Vigyan Kendra (KVK) ya agriculture officer se sampark karein."

5. Knowledge Limit (Agar pata nahi hai toh?)
Never guess:

"Mujhe iska exact solution nahi pata, lekin aap KVK se confirm kar sakte hain."

"Ye chemical ka exact dosage mujhe maloom nahi, kripya package instructions dekhein."

Example Responses (Examples for Bot)
Farming Query:
Farmer: "Meri tomato crop ke leaves curl ho rahe hain?"
Bot: *"Ye whitefly attack ka sign ho sakta hai. 1. Yellow sticky traps lagayein. 2. Neem oil (5ml/liter) spray karein. 3. Overwatering avoid karein."*

Non-Farming Query:
User: "iPhone ka screen kaise repair karein?"
Bot: "Mai sirf farming problems solve karta hoon. Kya aapke kheti se related koi sawaal hai?"`;
        const model = genAI.getGenerativeModel({ 
            model: "gemini-1.5-flash-latest",
            systemInstruction: systemInstruction,
        });
        let chat = model.startChat({ history: [] });
        
        // --- VOICE RECOGNITION SETUP ---
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        let isListening = false;
        
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = false; // Stop after user finishes speaking
            recognition.interimResults = true;
            recognition.lang = 'hi-IN'; // Hindi (India) for Hinglish recognition
            
            recognition.onstart = () => {
                isListening = true;
                voiceButton.classList.add('listening');
                updateVoiceStatus("Listening... Speak now");
            };
            
            recognition.onend = () => {
                isListening = false;
                voiceButton.classList.remove('listening');
                updateVoiceStatus("");
            };
            
            recognition.onerror = (event) => {
                console.error('Speech recognition error', event.error);
                let msg = event.error === 'not-allowed' ? "Microphone access denied." : "Speech recognition error.";
                updateVoiceStatus(msg);
            };
            
            recognition.onresult = (event) => {
                let finalTranscript = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    if (event.results[i].isFinal) {
                        finalTranscript += event.results[i][0].transcript;
                    }
                }
                if (finalTranscript) {
                    userInput.value = finalTranscript;
                    sendMessage();
                }
            };
        } else {
            voiceButton.style.display = 'none';
            updateVoiceStatus("Voice input not supported.");
        }
        
        // --- CORE FUNCTIONS ---
        
        async function sendMessage() {
            const message = userInput.value.trim();
            if (message === '') return;
            
            addMessage(message, 'user');
            userInput.value = '';
            showTypingIndicator();
            
            try {
                const result = await chat.sendMessage(message);
                const response = await result.response;
                const text = response.text();
                
                hideTypingIndicator();
                addMessage(text, 'bot');
                await speakResponse(text); // Use ElevenLabs for TTS
                
            } catch (error) {
                console.error('Error getting response from Gemini:', error);
                hideTypingIndicator();
                addMessage("Maaf kijiye, abhi jawab dene mein dikkat aa rahi hai.", 'bot');
            }
        }
        
        async function speakResponse(text) {
            // Disable buttons to prevent spamming during TTS
            sendButton.disabled = true;
            voiceButton.disabled = true;

            const url = `https://api.elevenlabs.io/v1/text-to-speech/${ELEVENLABS_VOICE_ID}`;
            const headers = {
                "Accept": "audio/mpeg",
                "Content-Type": "application/json",
                "xi-api-key": ELEVENLABS_API_KEY
            };
            const body = JSON.stringify({
                text: text,
                model_id: "eleven_multilingual_v2",
                voice_settings: {
                    stability: 0.7,
                    similarity_boost: 0.8
                }
            });

            try {
                const response = await fetch(url, { method: "POST", headers, body });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`TTS request failed: ${response.statusText} - ${JSON.stringify(errorData)}`);
                }

                const blob = await response.blob();
                const audioUrl = URL.createObjectURL(blob);
                const audio = new Audio(audioUrl);
                
                await new Promise((resolve) => {
                    audio.onended = resolve;
                    audio.play();
                });

            } catch (error) {
                console.error("Error with ElevenLabs TTS:", error);
            } finally {
                // Re-enable buttons after TTS is finished or failed
                sendButton.disabled = false;
                voiceButton.disabled = false;
            }
        }

        function toggleVoiceInput() {
            if (!SpeechRecognition) return;
            if (isListening) {
                recognition.stop();
            } else {
                try {
                    userInput.value = '';
                    recognition.start();
                } catch (error) {
                    console.error('Speech recognition start failed:', error);
                    updateVoiceStatus("Could not start voice input.");
                }
            }
        }

        // --- HELPER & UI FUNCTIONS ---
        
        function handleKeyPress(event) {
            if (event.key === 'Enter') sendMessage();
        }
        
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', `${sender}-message`);
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'message bot-message typing-indicator';
            typingDiv.innerHTML = `<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>`;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) typingIndicator.remove();
        }
        
        function showSampleQuestion(question) {
            userInput.value = question;
            userInput.focus();
        }

        function updateVoiceStatus(message) {
            document.getElementById('voice-status').textContent = message;
        }

        // --- GLOBAL ACCESS & EVENT LISTENERS ---
        window.sendMessage = sendMessage;
        window.handleKeyPress = handleKeyPress;
        window.showSampleQuestion = showSampleQuestion;
        window.toggleVoiceInput = toggleVoiceInput;

        voiceButton.addEventListener('click', toggleVoiceInput);
    </script>
</body>
</html>